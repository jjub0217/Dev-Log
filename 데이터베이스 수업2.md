var : 분산

stddev : 스탠다드

---

use world;

select code, name, Continent, Population, GNP
 , gnp/population as gnp_per_population
from country
where gnp >= 10000 and population > 10000000
order by gnp/population desc
limit 5;

# countrylanguage 테이블에서 스페인어, 한국어, 영어를 95% 이상 사용하는 국가 코드를 percentage로 내림차순하여 아래과 같이 조회하세요.
select CountryCode, Language, Percentage
from countrylanguage
where Language in ("spanish", "korean", "english")
and percentage >= 95
order by Percentage desc;

# country 테이블에서 code가 a 로 시작하고 covernmentform에 republic이 포함되는 데이터를 아래와 같이 조회하세요.
select code, name, continent, governmentform, population
from country
where code like "A%" and governmentform like "%republic%"
order by Population desc

# sakila film_text 테이블에서  title이 ice가 들어가고 description에 drama가 들어간 데이터를 출력하세요.
use sakila;
select *
from film_text
where title like "%ice%" and description like "%drama%";

 # sakila 데이터 베이스의 film_list 뷰에서 price가 1~4, length가 180 이상, category는 sci-fi과 anmation이 아닌 데이터를 출력하세요.
 select title, description, category, laength, price 
 from film_list
 where (price between 1 and 4) and (length >= 180)
 and (category not in ("sci-fi" , "animation"))

 # "gruop by having"

 # 여러개의 동일한 데이터를 가지는 특정 컬럼을 합져주는 문법
 # "그룹함수: count, max, min, var_samp, stddev"

# city 테이블에서 국가별 도시의 수의 데이터를 출력하세요. : count
select CountryCode, count(CountryCode) as city_count
from city
group by countrycode

# 전체 언어가 몇개있는지 출력 : distinct
select count(distinct(Language)) as language_count
from countrylanguage

# max : 대륙별 인구수와 gnp의 최대 값을 조회
use world;
select continent, max(population), max(gnp)
from country
group by continent;

# 대륙별 총인구수, 총gnp
use world;
select Continent, sum(population), sum(gnp), sum(gnp) / sum(population) as Result
from country
group by continent
order by Result desc

# having : GROUP BY 를 한 결과 데이터에 대한 조건을 입력해서 조회
# 대륙별 전체 인구수에서 5억 이상의 대륙을 출력
select Continent, sum(population) as population
from country
group by continent
having population >= 500000000

# country 테이블에서 중복을 제거한 continent를 조회하세요.
use world;
select distinct(continent)
from country;

# sakila 데이터 베이스에서 국가가 인도 고객의 수를 출력하세요.
use sakila;
select country, count(country)
from customer_list
where country = "India"

select country, count(country)
from custmoer_list
group by country
having country = "India";

#  sakila actor 테이블에서 first_name 이 dan 인 배우의 수를 출력하세요
select first_name, count(first_name)
from 

# 데이터 베이스 생성
create DATABASE test;
use test;
select database()
#테이블 생성
create table user1(
user_id INT,
name Varchar(20),
email Varchar(30),
age INT(3),
rdate DATE
);

create table user2(
user_id INT PRIMARY KEY AUTO_INCREMENT,
name Varchar(20) NOT NULL,
email Varchar(30) NOT NULL UNIQUE,
age INT(3) DEFAULT 30,
rdate timestamp
);

DESC user1;
DESC user2;

# "ALTER : 데이터 수정"
# "데이터 베이스의 인코딩 수정"
SHOW VARIABLES LIKE "character_set_database";
ALTER DATABASE test CHARACTER SET = utf8;

#테이블 속성값 수정
DESC user2;
# user2 테이블에 TEXT 데이터 타입을 갖는 article 컬럼 추가
ALTER TABLE user2 ADD article TEXT;
# user2 테이블에 article 컬럼을 INT로 변경
ALTER TABLE user2 MODIFY column article INT;
# user2 테이블에 article 컬럼을 삭제
ALTER TABLE user2 DROP article;

# "INSERT" 
INSERT INTO user1 (user_id, name, email, age , rdate)
VALUES (1, "andy", "jin@gmail.com", 21, "2017-01-05"),
(2, "ted", "jin@gmail.com", 25, "2017-01-05"),
(3, "jhon", "jin@gmail.com", 27, "2017-01-05"),
(4, "peter", "jin@gmail.com", 31, now());

selet *
from user1;

use world;

CREATE TABLE city_2 (
Name VARCHAR(50),
Counturycode CHAR(3),
district Varchar(50),
population INT
);
DESC city_2;
insert into city_2
select name, countrycode, district, population
from city
where population > 8000000;

selet *
from city_2

# update set (업데이트 할때는 
use test;
select *
from user1;
update user1
set age=29, email="mysql@gmail.com", name="macbook"
where age=21;
limit 2;

select *
from user1

# delete, drop, truncate

delete from user1
where age<25;
select *
from user1

# 스키마만 남기고 모든 데이터 삭제
TRUNCATE TABLE user1;

# 테이블 삭제
drop table user1;

# 데이터 베이스 삭제
drop database test;

# 여러가지 함수들

# CEIL, ROUND, TRUNCATE, DATE_FORMAT
select ceil(12.345*10)/10;
select round(12.645, 1);
select truncate(12.345, 2);

use sakila;
select date_format(payment_date, "%Y-&m") as monthly, sum(amount)
from payment
group by monthly;

# if ifnull, case
use world;
# 도시의 인구가 100만이 넘으면 "big_city"를 출력하고, 아니면 "small_city"를 출력
select name, population
, if(population > 1000000, "big_city", "small_city")
as scale 
from city;

# ifnull
# 널데이터가 있는지 없는지에 따라서 결과를 출력
 select Indepyear, ifnull(Indepyear, 0)
 from country;

 # case
 # 나라별로 인구가 10억 이상 , 1억 이상, 1억 미만을 출력하는 컬럼을 추가하세요.
 select name, population, 
 case
 when population >= 100000000 then "upper 1 bilion"
 when population >= 10000000 then "upper 100 milion"
 else "below 100 milion"
 end as result
 from country;




# 데이터 정의어

### 데이터 베이스 생성

1. CEATE DATEBASE test;





